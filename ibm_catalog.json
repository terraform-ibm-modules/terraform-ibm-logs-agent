{
  "products": [
    {
      "label": "Cloud automation for Logs Agent",
      "name": "deploy-arch-ibm-logs-agent",
      "product_kind": "solution",
      "tags": [
        "ibm_created",
        "target_terraform",
        "terraform",
        "solution",
        "logging",
        "logging_monitoring",
        "converged_infra"
      ],
      "keywords": [
        "logs",
        "agent",
        "IaC",
        "infrastructure as code",
        "terraform",
        "solution"
      ],
      "provider_name": "IBM",
      "short_description": "Automates the installation of the IBM Logs Agent on a Red Hat OpenShift Cluster or Kubernetes Service",
      "long_description": "The Cloud Automation for the [Logs Agent](https://cloud.ibm.com/docs/cloud-logs?topic=cloud-logs-agent-about) on a Red Hat OpenShift cluster or Kubernetes Service simplifies the configuration process, enabling the agent to collect and forward infrastructure and application logs directly to an IBM Cloud Logs instance.\n\nℹ️ This Terraform-based automation is part of a broader suite of IBM-maintained Infrastructure as Code (IaC) assets, each following the naming pattern \"Cloud automation for *servicename*\" and focusing on single IBM Cloud service. These single-service deployable architectures can be used on their own to streamline and automate service deployments through an [IaC approach](https://cloud.ibm.com/docs/secure-enterprise?topic=secure-enterprise-understanding-projects), or assembled together into a broader [automated IaC stack](https://cloud.ibm.com/docs/secure-enterprise?topic=secure-enterprise-config-stack) to automate the deployment of an end-to-end solution architecture.",
      "offering_docs_url": "https://github.com/terraform-ibm-modules/terraform-ibm-logs-agent/blob/main/README.md",
      "offering_icon_url": "https://raw.githubusercontent.com/terraform-ibm-modules/terraform-ibm-logs-agent/refs/heads/main/images/logs-icon.svg",
      "features": [
        {
          "title": "Logs Agent",
          "description": "Deploys the IBM Logs Agent on a [Red Hat OpenShift Cluster](https://cloud.ibm.com/docs/openshift) or [Kubernetes Service](https://cloud.ibm.com/docs/containers?topic=containers-getting-started)."
        }
      ],
      "flavors": [
        {
          "label": "Fully configurable",
          "name": "fully-configurable",
          "index": 1,
          "install_type": "fullstack",
          "working_directory": "solutions/fully-configurable",
          "compliance": {
            "authority": "scc-v3",
            "profiles": [
              {
                "profile_name": "IBM Cloud Framework for Financial Services",
                "profile_version": "1.7.0"
              }
            ]
          },
          "iam_permissions": [
            {
              "service_name": "containers-kubernetes",
              "role_crns": [
                "crn:v1:bluemix:public:iam::::serviceRole:Manager",
                "crn:v1:bluemix:public:iam::::role:Viewer"
              ],
              "notes": "Required to create and edit Logs Agent related resources."
            },
            {
              "role_crns": [
                "crn:v1:bluemix:public:iam::::role:Viewer"
              ],
              "service_name": "Resource group only",
              "notes": "Viewer access is required in the resource group you want to provision in."
            }
          ],
          "architecture": {
            "features": [
              {
                "title": " ",
                "description": "Configured to use IBM secure by default standards, but can be edited to fit your use case."
              }
            ],
            "diagrams": [
              {
                "diagram": {
                  "url": "https://raw.githubusercontent.com/terraform-ibm-modules/terraform-ibm-logs-agent/refs/heads/main/reference-architecture/deployable-architecture-logs-agent.svg",
                  "caption": "Logs Agent topology",
                  "type": "image/svg+xml"
                },
                "description": "<b>Logs Agent</b> can be deployed on a Red Hat OpenShift cluster or a Kubernetes service to collect, process, and forward application and system logs to a [IBM Cloud Logs instance](https://cloud.ibm.com/docs/cloud-logs). This setup is essential for achieving comprehensive observability, supporting both real-time monitoring and historical analysis of workloads running within the cluster."
              }
            ]
          },
          "configuration": [
            {
              "key": "ibmcloud_api_key",
              "required": true
            },
            {
              "key": "cluster_id",
              "custom_config": {
                "type": "cluster_var",
                "grouping": "deployment",
                "original_grouping": "deployment"
              },
              "required": true
            },
            {
              "key": "cluster_resource_group_id",
              "required": true,
              "custom_config": {
                "type": "resource_group",
                "grouping": "deployment",
                "original_grouping": "deployment",
                "config_constraints": {
                  "identifier": "rg_id"
                }
              }
            },
            {
              "key": "is_vpc_cluster",
              "required": true
            },
            {
              "key": "is_ocp_cluster",
              "required": true
            },
            {
              "key": "instance_region",
              "type": "string",
              "custom_config": {
                "config_constraints": {
                  "generationType": "2"
                },
                "grouping": "deployment",
                "original_grouping": "deployment",
                "type": "vpc_region"
              },
              "description": "Region in which cloud logs instance will be deployed. [Learn More](https://terraform-ibm-modules.github.io/documentation/#/region).",
              "virtual": true,
              "default_value": "us-south"
            },
            {
              "key": "cluster_region",
              "type": "string",
              "custom_config": {
                "config_constraints": {
                  "generationType": "2"
                },
                "grouping": "deployment",
                "original_grouping": "deployment",
                "type": "vpc_region"
              },
              "description": "Region in which cluster will be deployed. [Learn More](https://terraform-ibm-modules.github.io/documentation/#/region).",
              "virtual": true,
              "default_value": "us-south"
            },
            {
              "key": "cloud_logs_ingress_endpoint",
              "required": true
            },
            {
              "key": "cloud_logs_ingress_port",
              "required": true
            },
            {
              "key": "logs_agent_trusted_profile_id",
              "required": true
            },
            {
              "key": "logs_agent_name"
            },
            {
              "key": "logs_agent_namespace"
            },
            {
              "key": "logs_agent_chart"
            },
            {
              "key": "logs_agent_chart_location"
            },
            {
              "key": "logs_agent_chart_version"
            },
            {
              "key": "logs_agent_image_version"
            },
            {
              "key": "logs_agent_resources"
            },
            {
              "key": "logs_agent_system_logs",
              "custom_config": {
                "grouping": "deployment",
                "original_grouping": "deployment",
                "config_constraints": {
                  "type": "string"
                }
              }
            },
            {
              "key": "logs_agent_additional_metadata",
              "custom_config": {
                "type": "textarea",
                "grouping": "deployment",
                "original_grouping": "deployment"
              }
            },
            {
              "key": "logs_agent_exclude_log_source_paths",
              "custom_config": {
                "grouping": "deployment",
                "original_grouping": "deployment",
                "config_constraints": {
                  "type": "string"
                }
              }
            },
            {
              "key": "logs_agent_iam_mode",
              "options": [
                {
                  "displayname": "Trusted Profile",
                  "value": "TrustedProfile"
                },
                {
                  "displayname": "IAM API Key",
                  "value": "IAMAPIKey"
                }
              ]
            },
            {
              "key": "logs_agent_iam_api_key"
            },
            {
              "key": "logs_agent_iam_environment",
              "options": [
                {
                  "displayname": "Production",
                  "value": "Production"
                },
                {
                  "displayname": "Private Production",
                  "value": "PrivateProduction"
                },
                {
                  "displayname": "Staging",
                  "value": "Staging"
                },
                {
                  "displayname": "Private Staging",
                  "value": "PrivateStaging"
                }
              ]
            },
            {
              "key": "logs_agent_log_source_namespaces",
              "custom_config": {
                "grouping": "deployment",
                "original_grouping": "deployment",
                "config_constraints": {
                  "type": "string"
                }
              }
            },
            {
              "key": "logs_agent_selected_log_source_paths"
            },
            {
              "key": "logs_agent_tolerations",
              "custom_config": {
                "type": "textarea",
                "grouping": "deployment",
                "original_grouping": "deployment"
              }
            },
            {
              "key": "cluster_config_endpoint_type",
              "options": [
                {
                  "displayname": "Default",
                  "value": "default"
                },
                {
                  "displayname": "Private",
                  "value": "private"
                },
                {
                  "displayname": "VPE",
                  "value": "vpe"
                },
                {
                  "displayname": "Link",
                  "value": "link"
                }
              ]
            },
            {
              "key": "wait_till",
              "options": [
                {
                  "displayname": "Master Node Ready",
                  "value": "MasterNodeReady"
                },
                {
                  "displayname": "One Worker Node Ready",
                  "value": "OneWorkerNodeReady"
                },
                {
                  "displayname": "Ingress Ready",
                  "value": "IngressReady"
                },
                {
                  "displayname": "Normal",
                  "value": "Normal"
                }
              ]
            },
            {
              "key": "wait_till_timeout"
            },
            {
              "key": "enable_multiline"
            },
            {
              "key": "provider_visibility",
              "options": [
                {
                  "displayname": "private",
                  "value": "private"
                },
                {
                  "displayname": "public",
                  "value": "public"
                },
                {
                  "displayname": "public-and-private",
                  "value": "public-and-private"
                }
              ],
              "hidden": true
            }
          ],
          "dependencies": [
            {
              "name": "deploy-arch-ibm-cloud-logs",
              "description": "Enable IBM Cloud Monitoring to gain operational visibility on applications running on OpenShift Cluster.",
              "id": "63d8ae58-fbf3-41ce-b844-0fb5b85882ab-global",
              "version": "v1.6.15",
              "flavors": [
                "fully-configurable"
              ],
              "catalog_id": "7a4d68b4-cf8b-40cd-a3d1-f49aff526eb3",
              "optional": true,
              "on_by_default": true,
              "input_mapping": [
                {
                  "dependency_input": "region",
                  "version_input": "instance_region",
                  "reference_version": true
                },
                {
                  "dependency_output": "cloud_logs_ingress_endpoint",
                  "version_input": "cloud_logs_ingress_endpoint"
                }
              ]
            },
            {
              "name": "deploy-arch-ibm-base-ocp-vpc",
              "description": "Configure the Red Hat OpenShift cluster on which monitoring agent will be installed.",
              "catalog_id": "7a4d68b4-cf8b-40cd-a3d1-f49aff526eb3",
              "flavors": [
                "fully-configurable"
              ],
              "id": "1728a4fd-f561-4cf9-82ef-2b1eeb5da1a8-global",
              "optional": true,
              "on_by_default": true,
              "input_mapping": [
                {
                  "dependency_output": "cluster_id",
                  "version_input": "cluster_id"
                },
                {
                  "version_input": "is_vpc_cluster",
                  "value": true
                },
                {
                  "dependency_input": "region",
                  "version_input": "cluster_region",
                  "reference_version": true
                },
                {
                  "dependency_input": "cluster_config_endpoint_type",
                  "version_input": "cluster_config_endpoint_type",
                  "reference_version": true
                }
              ],
              "version": "v3.50.0"
            },
            {
              "name": "deploy-arch-ibm-account-infra-base",
              "description": "Cloud automation for Account Configuration organizes your IBM Cloud account with a ready-made set of resource groups by default and, when you enable the \"with Account Settings\" option, it also applies baseline security and governance settings. ",
              "catalog_id": "7a4d68b4-cf8b-40cd-a3d1-f49aff526eb3",
              "flavors": [
                "resource-group-only",
                "resource-groups-with-account-settings"
              ],
              "default_flavor": "resource-group-only",
              "id": "63641cec-6093-4b4f-b7b0-98d2f4185cd6-global",
              "input_mapping": [
                {
                  "dependency_output": "workload_resource_group_id",
                  "version_input": "cluster_resource_group_id"
                }
              ],
              "optional": true,
              "on_by_default": false,
              "version": "v3.0.7"
            }
          ],
          "dependency_version_2": true,
          "terraform_version": "1.10.5"
        }
      ]
    }
  ]
}
